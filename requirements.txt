# ============================================================
# Data Science Agent - Core Dependencies
# 150+ ML/AI Tools with GPU Support + Unstructured Data Processing
# ============================================================
#
# IMPORTANT: Version Constraints
# - numpy MUST be <2.0 (opencv-python incompatible with numpy 2.x)
# - opencv-python required by AutoGluon multimodal
# 
# Package Name Differences (pip vs import):
#   pip: imbalanced-learn    → import: imblearn
#   pip: sentence-transformers → import: sentence_transformers
#   pip: alibi-detect         → import: alibi_detect
#   pip: faiss-cpu/faiss-gpu  → import: faiss
#   pip: python-dotenv        → import: dotenv
#   pip: scikit-learn         → import: sklearn
# ============================================================

# ============================
# Core Framework & LLM
# ============================
litellm>=1.59.3
openai>=1.61.1
python-dotenv>=1.0.1

# ============================
# Web Framework
# ============================
uvicorn[standard]>=0.34.0
fastapi>=0.115.6

# ============================
# Data Science Core
# ============================
# CRITICAL: numpy must be <2.0 for opencv compatibility!
numpy>=1.26.4,<2.0
opencv-python>=4.10.0.84
pandas>=2.2.3
scikit-learn>=1.6.1

# ============================
# Visualization & Reporting
# ============================
matplotlib>=3.10.0
seaborn>=0.13.2
plotly>=5.24.1
reportlab>=4.2.5
Pillow>=11.1.0

# ============================
# Machine Learning Frameworks
# ============================
xgboost>=2.1.3
lightgbm>=4.5.0
catboost>=1.2.7

# ============================
# AutoML
# ============================
autogluon>=1.2.0
# auto-sklearn>=0.15.0  # Linux/Mac only - NOT compatible with Windows!

# ============================
# Model Explainability
# ============================
shap>=0.46.0

# ============================
# Hyperparameter Optimization
# ============================
optuna>=4.2.0

# ============================
# Data Validation & Quality
# ============================
great-expectations>=1.2.4

# ============================
# Experiment Tracking & Governance
# ============================
mlflow>=2.19.0

# ============================
# Responsible AI & Fairness
# ============================
fairlearn>=0.11.0

# ============================
# Data & Model Drift Detection
# ============================
evidently>=0.4.46

# ============================
# Causal Inference
# ============================
dowhy>=0.11.1
econml>=0.15.1

# ============================
# Advanced Feature Engineering
# ============================
featuretools>=1.31.0

# ============================
# Imbalanced Learning & Calibration
# ============================
imbalanced-learn>=0.12.4

# ============================
# Time Series Forecasting
# ============================
prophet>=1.1.6
statsmodels>=0.14.4

# ============================
# Embeddings & Vector Search
# ============================
sentence-transformers>=3.3.1
# CPU version (use faiss-gpu for GPU systems):
faiss-cpu>=1.9.0.post1

# ============================
# Data Version Control
# ============================
dvc>=3.59.2

# ============================
# Model Monitoring
# ============================
alibi-detect>=0.12.1

# ============================
# Fast Query & Data Processing
# ============================
duckdb>=1.1.3
polars>=1.19.0
pyarrow>=18.1.0  # Required for Parquet conversion, columnar data processing

# ============================
# Additional Scientific Computing
# ============================
scipy>=1.15.1
joblib>=1.4.2

# ============================
# Clustering & Anomaly Detection
# ============================
hdbscan>=0.8.40
pyod>=2.0.2

# ============================
# Deep Learning (CPU version)
# ============================
torch>=2.5.1
lightning>=2.4.0  # PyTorch Lightning for training loops
transformers>=4.48.1
timm>=1.0.12  # PyTorch Image Models for vision
onnx>=1.17.0  # Model export for production
onnxruntime>=1.20.1  # ONNX inference
captum>=0.7.0  # Model interpretability (Integrated Gradients, SHAP)
# tensorflow>=2.18.0  # Optional: Only needed for TensorFlow GPU detection in gpu_config.py

# ============================
# Text Processing & NLP
# ============================
langchain-text-splitters>=0.3.4

# ============================
# Utilities
# ============================
tqdm>=4.67.1
requests>=2.32.3
nest-asyncio>=1.6.0  # For nested event loop support

# ============================================================
# GPU Support (Optional)
# ============================================================
# For GPU systems, replace/add these packages:
#   - torch (install with CUDA): pip install torch --index-url https://download.pytorch.org/whl/cu121
#   - xgboost[gpu] instead of xgboost
#   - faiss-gpu instead of faiss-cpu
#   - cupy-cuda12x for GPU-accelerated NumPy operations
# 
# Note: The startup scripts auto-detect GPU and install appropriate versions
# ============================================================

# ============================
# ADK Framework (if needed)
# ============================
# Uncomment if using Google ADK:
# google-adk>=0.1.0

# ============================================================
# UNSTRUCTURED DATA PROCESSING
# Full pipeline for text, documents, images (OCR), audio (STT)
# ============================================================

# ============================
# Text Extraction & Processing
# ============================
pymupdf>=1.25.4              # PDF extraction (import: fitz)
python-docx>=1.1.2           # DOCX extraction (import: docx)
trafilatura>=1.14.0          # HTML content extraction
beautifulsoup4>=4.12.3       # HTML/XML parsing (import: bs4)
lxml>=5.3.0                  # XML parsing

# ============================
# Email & Mailbox Parsing
# ============================
# Standard library: email, mailbox (no install needed)

# ============================
# OCR (Optical Character Recognition)
# ============================
pytesseract>=0.3.14          # Tesseract OCR wrapper
# SYSTEM REQUIREMENT: Install Tesseract-OCR binary separately
#   Windows: choco install tesseract
#   Mac: brew install tesseract
#   Linux: apt-get install tesseract-ocr

# ============================
# Speech-to-Text (STT)
# ============================
openai-whisper>=20240930     # OpenAI Whisper (import: whisper)
# Alternative: whisperx (faster, more accurate)
# whisperx>=3.1.0

# ============================
# Text Chunking & Tokenization
# ============================
tiktoken>=0.8.0              # OpenAI tokenizer
nltk>=3.9.1                  # Sentence tokenization

# ============================
# Embeddings (already in main requirements)
# ============================
# sentence-transformers>=3.3.1  (already listed above)
# faiss-cpu>=1.9.0             (already listed above)

# ============================================================
# Installation Instructions
# ============================================================
#
# Option 1: Using pip
#   pip install -r requirements.txt
#
# Option 2: Using uv (faster)
#   uv pip install -r requirements.txt
#
# Option 3: Automatic (Recommended)
#   python start_server.py
#   # Auto-detects system and installs correct versions
#
# ============================================================
# Updated: October 2025
# All packages tested and verified working together
# ============================================================
